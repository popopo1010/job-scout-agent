# 要件定義書

## 1. Mission（ミッション）

### 1.1 プロジェクトの使命

**人の最適なマッチングをすることで、産業の生産性と働きがいを向上させ建設業界をハッピーにする。ひいては日本の生産性をあげていく。**

### 1.2 ビジョン（Vision）

#### FY25: 電気工事士の事業のPMF

**定性目標**: 電気工事士の事業のPMF達成

**定量目標**:
- 月内定12名（CA 3名 × 4名/月、展開率20%）
- 月売上2,100万円（12名 × 175万円）
- 単価175万円
- CA 3名（1人あたり20名リード、4名展開）
- Sales 1名

#### FY26: 電気工事士業界No1、施工管理人材紹介のPMF

**定性目標**: 
- 電気工事士業界No1
- 施工管理人材紹介のPMF達成

**定量目標**:
- CA 6名（1人あたり20名リード、4名展開）
- 月リード120名（6名 × 20名）
- 月内定24名（6名 × 4名、展開率20%）
- 月売上4,200万円（24名 × 175万円）
- 年間売上5億400万円（4,200万円 × 12ヶ月）
- Sales 1名

#### FY27: 電気工事人材紹介の完全移譲、施工管理人材紹介の業界No1ポテンシャル

**定性目標**:
- 電気工事人材紹介の完全移譲
- 施工管理人材紹介の業界No1ポテンシャル確立

**定量目標**:
- CA 9名（1人あたり20名リード、4名展開）
- 月リード180名（9名 × 20名）
- 月内定36名（9名 × 4名、展開率20%）
- 月売上6,300万円（36名 × 175万円）
- 年間売上7億5,600万円（6,300万円 × 12ヶ月）
- 事業責任者1名
- CA 9名（TL 2名、Player 7名）
- Sales 1名

### 1.3 システムの役割

本AIエージェントシステムは、上記MissionとVisionを実現するための支援ツールとして機能する：

- **経営層**: セグメント別の期待展開率に基づく戦略的意思決定を支援
- **マネージャー**: CAのパフォーマンス可視化とリード振り分けの最適化を実現
- **CA**: 営業スキル向上のための継続的なフィードバックを提供
- **営業企画**: 新規法人発見と既存法人の新規エリア展開を自動検出

---

## 2. プロジェクト概要

### 2.1 プロジェクト名
**人材紹介事業 AIエージェントシステム**

### 2.2 目的
人材紹介事業における業務効率化と意思決定支援を実現する3つのシステムを構築する。

### 2.3 対象ユーザー
| ユーザー | 利用システム |
|---------|-------------|
| 経営層 | 経営分析基盤 |
| マネージャー | 経営分析基盤、フィードバックシステム |
| キャリアアドバイザー（CA） | フィードバックシステム |
| 営業企画 | 求人データ整備 |

---

## 2. システム1: 経営分析基盤

### 2.1 現状の課題
- エリアごと、年齢ごと、資格ごとにしか期待展開率を算出できていない
- 各セグメントを掛け合わせた分析ができていない
- リード振り分けの最適化ができていない

### 2.2 目指す状態
1. 全セグメント掛け合わせによる期待展開率の算出
2. 一人あたりの適正保有件数の算出
3. 日々のリード振り分けへの活用
4. 適正期待展開率に対するパフォーマンス可視化

### 2.3 機能要件

| ID | 機能 | 説明 | 優先度 |
|----|------|------|--------|
| A-001 | セグメント自動分類 | 資格有無×年齢による4セグメント自動ラベリング | 高 |
| A-002 | 適正保有件数算出 | CA一人あたりの適正保有リード件数を算出 | 高 |
| A-003 | リード振り分け支援 | 期待展開率に基づいたリード振り分け提案 | 中 |
| A-004 | パフォーマンス可視化 | 適正期待展開率に対する実績比較ダッシュボード | 中 |
| A-005 | アラート機能 | 期待値から乖離した場合の通知 | 低 |

### 2.4 セグメント定義

リードは以下の4セグメントに自動分類され、期待展開率が付与される：

| セグメントID | 名称 | 条件 | 期待展開率 | 優先度 |
|-------------|------|------|-----------|--------|
| A | 資格あり若手 | 電気工事士資格あり & 40歳以下 | 75% | 1 |
| B | 資格ありベテラン | 電気工事士資格あり & 40歳超 | 60% | 2 |
| C | 資格なし若手 | 電気工事士資格なし & 40歳以下 | 40% | 3 |
| D | 資格なしシニア | 電気工事士資格なし & 40歳超 | 20% | 4 |

**自動ラベリングロジック:**
```
if 電気工事士資格あり:
    if 年齢 <= 40: セグメントA（75%）
    else: セグメントB（60%）
else:
    if 年齢 <= 40: セグメントC（40%）
    else: セグメントD（20%）
```

### 2.5 入力データ
- リードデータ（年齢、資格情報）
- 過去の展開実績データ
- CA別保有リード情報

### 2.6 出力
- セグメント別期待展開率レポート
- CA別セグメント保有状況
- 適正保有件数レポート
- リード振り分け提案
- パフォーマンスダッシュボード

---

## 3. システム2: フィードバックシステム

### 3.1 背景
CA（キャリアアドバイザー）のスキル向上のため、営業通話内容を分析し、自動的にフィードバックを提供する。

### 3.2 使用資料
- CA向け営業マニュアル
- PSS（Professional Selling Skills）資料
- ADS（Adaptive Dealer Selling）スキル資料

### 3.3 機能要件

| ID    | 機能          | 説明                           | 優先度 |
| ----- | ----------- | ---------------------------- | --- |
| F-001 | 書き起こしファイル読込 | 指定ディレクトリに配置された書き起こしテキストを読み込み | 高   |
| F-002 | 内容分析        | 営業マニュアル・スキル資料に基づく通話内容の分析     | 高   |
| F-003 | フィードバック生成   | PSS/ADSの観点からフィードバックを自動生成     | 高   |
| F-004 | Slack送信     | 生成したフィードバックを該当CAのSlackに自動送信  | 高   |
| F-005 | 定期実行        | 上記プロセスの定期自動実行                | 中   |
| F-006 | フィードバック履歴   | 過去のフィードバック履歴の保存・閲覧           | 低   |

### 3.4 入力データ
- 書き起こし済みテキストファイル（`data/transcripts/pending/`に配置）
- CA向け営業マニュアル（テキスト/PDF）
- PSS/ADSスキル資料（テキスト/PDF）
- CA情報（Slack ID紐付け）

### 3.5 書き起こしファイル形式

**配置場所:** `data/transcripts/pending/`

**命名規則:**
```
{YYYY-MM-DD}_{CA_ID}_{会議識別子}.txt
例: 2025-01-15_ca001_weekly-mtg.txt
```

**ファイル形式:**
- UTF-8エンコーディング
- プレーンテキスト

### 3.6 出力
- 通話ごとのフィードバックレポート
- Slack通知メッセージ
- 改善ポイントのサマリー

### 3.7 フィードバック観点（例）
- オープニング/クロージングの品質
- 顧客ニーズのヒアリング度合い
- 提案の適切性
- 反論対応の質
- 次のアクション設定

---

## 4. システム3: 求人データ整備

### 4.1 現状の課題

**課題1: 新規法人の見落とし**
- まだ保有していない法人が電気工事士求人を出している可能性がある
- 新着で出てきた会社の求人をキャッチできていない

**課題2: 既存法人の新規エリア求人の見落とし**
- すでに保有している法人が、自社で把握していないエリアで新たに求人を出しているケースがある
- 既存法人の求人展開を追跡できていない

### 4.2 目指す状態
1. **新規法人発見**: 保有していない法人の電気工事士求人を網羅的に発見
2. **既存法人の新規エリア検知**: 既存法人が新しいエリアで出している求人を検知
3. **自社データとの比較**: 収集した求人と自社保有求人を比較し、不足分を特定
4. **定期自動チェック**: 上記を自動的に定期実行する仕組み

### 4.3 機能要件

| ID | 機能 | 説明 | 優先度 |
|----|------|------|--------|
| J-001 | 求人サイトスクレイピング | 主要求人サイトからの電気工事士求人収集 | 高 |
| J-002 | 専門媒体調査 | 電気工事士専門の求人媒体からのデータ収集 | 高 |
| J-003 | データ正規化 | 収集した求人データの統一フォーマット化（会社名、エリア、求人内容） | 高 |
| J-004 | 新規法人検出 | 既存保有法人リストにない会社の求人を抽出 | 高 |
| J-005 | 既存法人・新規エリア検出 | 既存法人が新しいエリアで出している求人を検出 | 高 |
| J-006 | 自社求人比較 | 収集求人と自社保有求人を比較し、不足求人を特定 | 高 |
| J-007 | 定期実行 | 週次/月次での自動チェック実行 | 中 |
| J-008 | 重複排除 | 同一求人の重複検知・排除 | 中 |
| J-009 | 差分レポート生成 | 新規発見・不足求人のレポート自動生成 | 中 |
| J-010 | 変更通知 | 新規発見時のSlack/メール通知 | 低 |

### 4.4 対象データソース（調査対象）
- 大手求人サイト（Indeed、リクナビ、マイナビ等）
- 電気工事士専門求人サイト
- 企業の採用ページ
- ハローワークインターネットサービス

### 4.5 入力データ
- **既存保有法人リスト**: 法人名、保有エリア（都道府県）
- **自社保有求人データ**: 法人名、エリア、求人内容
- 対象都道府県リスト（全国47都道府県）

### 4.6 出力

| レポート種別 | 内容 | 用途 |
|-------------|------|------|
| 新規法人リスト | まだ保有していない法人の求人一覧 | 新規開拓リード |
| 既存法人・新規エリアリスト | 既存法人が新エリアで出している求人 | 既存法人への追加アプローチ |
| 不足求人レポート | 自社保有求人と比較した不足分 | 求人獲得活動 |
| 都道府県別サマリー | エリア別の求人カバー率 | 戦略立案 |

### 4.7 比較ロジック概要

```
┌─────────────────────────────────────────────────────────────────┐
│                    求人データ比較フロー                          │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [収集した求人データ]                                            │
│         │                                                       │
│         ▼                                                       │
│  ┌─────────────────┐                                            │
│  │ 法人名で分類     │                                            │
│  └────────┬────────┘                                            │
│           │                                                     │
│     ┌─────┴─────┐                                               │
│     ▼           ▼                                               │
│ [既存法人]   [新規法人] ─────▶ 新規法人リスト                     │
│     │                                                           │
│     ▼                                                           │
│ ┌─────────────────────┐                                         │
│ │ エリアで比較         │                                         │
│ │ (自社保有エリア vs   │                                         │
│ │  収集エリア)         │                                         │
│ └──────────┬──────────┘                                         │
│            │                                                    │
│      ┌─────┴─────┐                                              │
│      ▼           ▼                                              │
│ [既存エリア]  [新規エリア] ─────▶ 既存法人・新規エリアリスト       │
│      │                                                          │
│      ▼                                                          │
│ ┌─────────────────────┐                                         │
│ │ 求人内容で比較       │                                         │
│ │ (自社保有求人 vs     │                                         │
│ │  収集求人)           │                                         │
│ └──────────┬──────────┘                                         │
│            ▼                                                    │
│     [不足求人リスト] ─────────▶ 不足求人レポート                  │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

## 5. 非機能要件

### 5.1 パフォーマンス
| 項目 | 要件 |
|------|------|
| 経営分析基盤 | レポート生成: 5分以内 |
| フィードバック生成 | 1通話あたり: 3分以内 |
| 求人データ収集 | 全サイト巡回: 24時間以内 |

### 5.2 セキュリティ
- APIキーの安全な管理（環境変数）
- 個人情報の適切な取り扱い
- アクセス権限の管理

### 5.3 運用
- エラー時の通知機能
- 実行ログの保存
- 手動実行のオプション

---

## 6. 技術仕様

### 6.1 技術スタック
| 項目 | 技術 |
|------|------|
| 言語 | Python 3.11+ |
| AIモデル | Claude (Anthropic) |
| データベース | SQLite（開発）/ PostgreSQL（本番） |
| ジョブスケジューラ | APScheduler |
| 通知 | Slack API |
| スクレイピング | httpx + BeautifulSoup |

### 6.2 外部API

| API | 用途 | 備考 |
|-----|------|------|
| Anthropic Claude API | フィードバック生成、データ分析 | |
| Slack API | 通知送信 | Bot Token必要 |

---

## 7. 用語集

| 用語 | 説明 |
|------|------|
| CA | キャリアアドバイザー。求職者の転職支援を担当 |
| 期待展開率 | リードから成約に至る確率の期待値 |
| リード | 見込み顧客・求職者 |
| PSS | Professional Selling Skills。営業スキルフレームワーク |
| ADS | Adaptive Dealer Selling。状況適応型営業手法 |
| セグメント | エリア・年齢・資格などの分類軸 |

---

## 8. 外部環境分析（PEST分析）

### 8.1 Political（政治・法規制）

**機会**:
- 脱炭素政策の推進（太陽光発電、風力発電、EV充電インフラ）
- 再エネ推進政策
- 公共投資の増加
- 建設業法の改正（施工管理技士の資格要件見直し）
- 資格取得支援（CBT方式導入）
- 特定技能制度（建設特定技能受入計画）

**脅威**:
- 労働安全衛生法の改正（2024年）
- 電気工事士法・電気工事業法の規制
- 労働法規制の強化
- 人材紹介事業法の改正
- 外国人労働者受け入れ制度の変更

### 8.2 Economic（経済）

**機会**:
- 建設投資の増加
- 電気工事市場の成長
- 有効求人倍率3.8倍（2025年6月時点）
- 深刻な人材不足（2045年までに第1種2.4万人、第2種0.3万人不足予測）
- 採用活動の多様化

**脅威**:
- 景気変動リスク
- 原材料価格高騰
- 賃金上昇圧力
- 採用コストの増加
- 長期的な人材不足

### 8.3 Social（社会）

**機会**:
- 高齢化による人手不足（平均年齢40代中盤から後半）
- 働き方改革の推進
- 資格取得への関心（CBT方式導入）
- 地方創生
- 女性活躍推進
- 安全意識の向上

**脅威**:
- 建設業界の「3K」イメージ
- 少子高齢化
- 転職への抵抗感
- 資格取得のハードル
- 技術継承の課題

### 8.4 Technological（技術）

**機会**:
- AI・IoT技術の導入
- DX推進（BIM、ICT施工、CCUS）
- 自動化技術
- 再生可能エネルギーの普及
- スマートグリッドの導入
- 新技術・新工法の導入
- CBT方式導入

**脅威**:
- 技術の陳腐化
- 自動化による需要減少
- スキルアップの必要性
- 競合の技術力
- デジタル化への対応
- 技術格差の拡大

詳細は [事業戦略 - PEST分析](../strategy/02-pest-analysis.md) を参照してください。

---

## 9. マーケットサイズ

### 9.1 現在のマーケットサイズ（2024年）

**電気工事士人材紹介市場**: 約300億円/年

**前提条件**:
- 人材紹介サービス利用企業数: 約6,800社
- 年間人材紹介経由採用数: 約17,000人
- 平均手数料: 175万円/人

### 9.2 今後のマーケットサイズ予測

| 年度 | マーケットサイズ（億円） | 前年比 | 累積成長率 |
|------|----------------------|--------|-----------|
| **2024年（基準）** | 300 | - | - |
| **2025年** | 315 | +5.0% | +5.0% |
| **2030年** | 402 | +5.0% | +34.2% |
| **2040年** | 540 | +3.0% | +80.0% |
| **2050年** | 658 | +2.0% | **+119.3%** |

**2050年のマーケットサイズ**: 約660億円/年（2024年比約2.2倍）

詳細は [事業戦略 - マーケットサイズ分析](../strategy/10-market-analysis.md) を参照してください。

---

## 10. 検討事項・未決定項目

- [ ] データベース選定（PostgreSQL vs SQLite vs クラウドDB）
- [ ] 求人サイトのスクレイピング可否確認（利用規約）
- [ ] フィードバックのフォーマット詳細
- [ ] 経営分析のダッシュボードツール選定
- [ ] 定期実行の頻度（日次/週次）

---

*最終更新: 2025-01-15（PEST分析追加、マーケットサイズ分析追加）*
