# タスクバックログ

## 概要

本ドキュメントでは、実装タスクをフェーズ別に管理する。

---

## フェーズ1: 基盤構築

### 完了済み
- [x] プロジェクト初期設定（pyproject.toml, .gitignore）
- [x] 仕様書ディレクトリ構成作成
- [x] 要件定義書作成
- [x] ユースケース定義
- [x] アーキテクチャ設計

### 進行中
- [ ] **T-001**: 共通基盤モジュール作成
  - [ ] `src/common/config.py` - 設定管理
  - [ ] `src/common/logger.py` - ログ設定
  - [ ] `src/common/database.py` - DB接続
  - [ ] `src/common/ai_client.py` - Claude APIクライアント

### 未着手
- [ ] **T-002**: ディレクトリ構造の作成
  - [ ] `src/analytics/`
  - [ ] `src/feedback/`
  - [ ] `src/job_data/`
  - [ ] `src/integrations/`

- [ ] **T-003**: 外部連携クライアント基盤
  - [ ] `src/integrations/transcript_reader.py`
  - [ ] `src/integrations/slack.py`
  - [ ] `src/integrations/scraper/base.py`

- [ ] **T-004**: テスト環境整備
  - [ ] pytest設定
  - [ ] テストデータ準備
  - [ ] CI/CD設定（GitHub Actions）

---

## フェーズ2: 経営分析基盤

### 未着手
- [ ] **T-010**: データモデル実装
  - [ ] Segment, Lead, ExpectationRate, CAPerformance

- [ ] **T-011**: セグメント分析ロジック
  - [ ] `segment_analyzer.py` - セグメント掛け合わせ分析
  - [ ] `expectation_calc.py` - 期待展開率計算

- [ ] **T-012**: 適正保有件数ロジック
  - [ ] CA別適正保有件数算出
  - [ ] 過不足計算

- [ ] **T-013**: リード振り分けロジック
  - [ ] `lead_distributor.py` - 振り分け提案

- [ ] **T-014**: レポート/ダッシュボード
  - [ ] レポート生成機能
  - [ ] ダッシュボードUI（Streamlit or 別ツール）

- [ ] **T-015**: アラート機能
  - [ ] 乖離検知ロジック
  - [ ] 通知連携

---

## フェーズ3: フィードバックシステム

### 未着手
- [ ] **T-020**: 書き起こしファイル処理
  - [ ] TranscriptReaderクラス実装
  - [ ] ファイル名パース（日付、CA_ID、会議ID抽出）
  - [ ] pending/processed/failedディレクトリ管理

- [ ] **T-021**: 通話分析・FB生成
  - [ ] 営業マニュアル/PSS/ADS資料の読み込み
  - [ ] Claude AIによる分析プロンプト設計
  - [ ] フィードバック構造定義

- [ ] **T-022**: Slack通知
  - [ ] Slack Bot設定
  - [ ] メッセージフォーマット
  - [ ] CA→Slack ID紐付け管理

- [ ] **T-023**: 定期実行
  - [ ] スケジューラ設定
  - [ ] エラーハンドリング
  - [ ] リトライ機構

- [ ] **T-024**: 履歴管理
  - [ ] フィードバック履歴保存
  - [ ] 履歴閲覧機能

---

## フェーズ4: 求人データ整備

### 未着手
- [ ] **T-030**: スクレイピング基盤
  - [ ] 基底スクレイパークラス
  - [ ] レート制限対応
  - [ ] エラーハンドリング

- [ ] **T-031**: 各サイト用スクレイパー
  - [ ] Indeed
  - [ ] ハローワーク
  - [ ] 専門媒体（調査後追加）

- [ ] **T-032**: データ正規化
  - [ ] 統一フォーマット定義（会社名、エリア、求人内容）
  - [ ] 正規化ロジック
  - [ ] 重複排除

- [ ] **T-033**: マスターデータインポート
  - [ ] 既存保有法人リストのインポート機能
  - [ ] 自社保有求人データのインポート機能
  - [ ] データ形式定義（CSV）

- [ ] **T-034**: 新規法人検出
  - [ ] `company_matcher.py` - 法人名マッチングロジック
  - [ ] 既存法人リストとの照合
  - [ ] 新規法人リスト生成

- [ ] **T-035**: 既存法人・新規エリア検出
  - [ ] `area_detector.py` - エリア比較ロジック
  - [ ] 自社保有エリアとの照合
  - [ ] 新規エリアリスト生成

- [ ] **T-036**: 自社求人比較
  - [ ] `job_comparator.py` - 求人比較ロジック
  - [ ] 自社保有求人との照合
  - [ ] 不足求人リスト生成

- [ ] **T-037**: レポート生成
  - [ ] 新規法人レポート
  - [ ] 既存法人・新規エリアレポート
  - [ ] 不足求人レポート
  - [ ] 都道府県別カバー率レポート
  - [ ] CSV/Excel出力

- [ ] **T-038**: 定期チェック・通知
  - [ ] 定期実行スケジュール設定
  - [ ] 差分検出と通知（Slack）
  - [ ] サマリーレポート自動送信

---

## フェーズ5: 統合・運用

### 未着手
- [ ] **T-040**: 統合テスト
  - [ ] E2Eテスト
  - [ ] パフォーマンステスト

- [ ] **T-041**: ドキュメント整備
  - [ ] APIドキュメント
  - [ ] 運用マニュアル

- [ ] **T-042**: デプロイ
  - [ ] 本番環境構築
  - [ ] 監視設定

---

## 優先度マトリックス

| タスク | 重要度 | 緊急度 | 依存関係 |
|--------|--------|--------|----------|
| T-001 | 高 | 高 | なし |
| T-002 | 高 | 高 | T-001 |
| T-003 | 高 | 中 | T-001 |
| T-010 | 高 | 中 | T-001, T-002 |
| T-020 | 高 | 中 | T-003 |
| T-030 | 高 | 中 | T-003 |

---

## 次のアクション

1. **T-001**: 共通基盤モジュールの実装から開始
2. 並行して **T-002**: ディレクトリ構造の作成
3. その後 **T-003**: 外部連携クライアント基盤

---

*最終更新: 2025-01-15*
