# ユースケース

## 概要

本ドキュメントでは、各システムの具体的な利用シナリオを記述する。

---

## システム1: 経営分析基盤

### UC-A01: セグメント別期待展開率の確認

**アクター**: 経営層、マネージャー

**目的**: 4セグメント（資格有無×年齢）別の期待展開率を確認し、戦略立案に活用する

**事前条件**:
- 過去の展開実績データが登録されている
- セグメント定義（A/B/C/D）が設定されている

**セグメント定義**:
| ID | 名称 | 条件 | 期待展開率 |
|----|------|------|-----------|
| A | 資格あり若手 | 電気工事士資格あり & 40歳以下 | 75% |
| B | 資格ありベテラン | 電気工事士資格あり & 40歳超 | 60% |
| C | 資格なし若手 | 電気工事士資格なし & 40歳以下 | 40% |
| D | 資格なしシニア | 電気工事士資格なし & 40歳超 | 20% |

**基本フロー**:
1. ユーザーがダッシュボードにアクセスする
2. セグメント別（A/B/C/D）の期待展開率一覧を確認する
3. システムが各セグメントの保有数・期待展開数を表示する
4. ユーザーがセグメント構成比を分析する

**事後条件**:
- セグメント別の期待展開率と保有状況が表示される

---

### UC-A02: 適正保有件数の算出

**アクター**: マネージャー

**目的**: CA一人あたりの適正なリード保有件数を把握する

**事前条件**:
- CA別の現在保有リード数が登録されている
- 過去の展開実績データが存在する

**基本フロー**:
1. マネージャーがCA管理画面にアクセスする
2. 対象CAまたはチームを選択する
3. システムが適正保有件数を算出して表示する
4. 現在の保有件数との差分が表示される

**事後条件**:
- 適正保有件数と現在の過不足が明確になる

---

### UC-A03: リード振り分けの最適化

**アクター**: マネージャー

**目的**: 新規リードを最適なCAに振り分ける

**事前条件**:
- 新規リード情報（年齢、資格）が入力されている
- CA別の現在保有状況が把握されている

**基本フロー**:
1. 新規リードが登録される
2. システムがリードのセグメント（A/B/C/D）を自動判定する
3. 各CAの適正保有件数と現在のセグメント別保有状況を考慮する
4. 最適な振り分け先CAを提案する
5. マネージャーが提案を確認し、承認または修正する

**事後条件**:
- リードが適切なCAに振り分けられる
- リードにセグメントIDと期待展開率が付与される

---

### UC-A04: パフォーマンス乖離アラート

**アクター**: マネージャー

**目的**: 期待展開率から大きく乖離しているケースを早期発見する

**事前条件**:
- 適正期待展開率が算出されている
- 実績データが日次で更新されている

**基本フロー**:
1. システムが日次で実績と期待値を比較する
2. 乖離が閾値を超えた場合、アラートを生成する
3. マネージャーにSlack/メールで通知する
4. マネージャーがダッシュボードで詳細を確認する

**事後条件**:
- 問題の早期発見と対応が可能になる

---

## システム2: フィードバックシステム

### UC-F01: 書き起こしファイルの読み込み

**アクター**: オペレーター（手動）/ システム（自動実行）

**目的**: Zoomで書き起こされた営業通話のテキストファイルを処理対象として読み込む

**事前条件**:
- 書き起こしファイルが命名規則に従って作成されている
- `data/transcripts/pending/`ディレクトリにファイルが配置されている

**基本フロー**:
1. オペレーターがZoomの書き起こしファイルをダウンロード
2. ファイル名を命名規則に従ってリネーム（`{日付}_{CA_ID}_{会議識別子}.txt`）
3. `data/transcripts/pending/`ディレクトリに配置
4. 次回の定期実行で自動的に処理される

**事後条件**:
- 書き起こしファイルが処理待ち状態になる

---

### UC-F02: 通話内容の分析とフィードバック生成

**アクター**: システム（自動実行）

**目的**: 通話内容を分析し、CAへのフィードバックを生成する

**事前条件**:
- 書き起こしファイルがpendingディレクトリに配置されている
- 営業マニュアル・PSS/ADS資料が登録されている

**基本フロー**:
1. pendingディレクトリから書き起こしファイルを取得する
2. ファイル名からCA情報を抽出する
3. テキスト内容をClaude AIに送信する
4. PSS/ADSの観点で通話内容を分析する
5. 構造化されたフィードバックを生成する
6. フィードバックをDBに保存する
7. 処理済みファイルをprocessedディレクトリに移動する

**事後条件**:
- 通話に対するフィードバックが生成・保存される

---

### UC-F03: Slackへのフィードバック送信

**アクター**: システム（自動実行）

**目的**: 生成されたフィードバックを該当CAにSlackで通知する

**事前条件**:
- フィードバックが生成済み
- CAとSlack IDの紐付けが設定されている

**基本フロー**:
1. 生成されたフィードバックを取得する
2. 該当CAのSlack IDを特定する
3. フィードバックをフォーマットしてSlack APIで送信する
4. 送信履歴を記録する

**事後条件**:
- CAがSlackでフィードバックを受信する

---

### UC-F04: フィードバック履歴の確認

**アクター**: CA、マネージャー

**目的**: 過去のフィードバック履歴を確認し、成長を振り返る

**事前条件**:
- 過去のフィードバックが蓄積されている

**基本フロー**:
1. ユーザーがフィードバック履歴画面にアクセスする
2. 期間やカテゴリでフィルタリングする
3. フィードバック一覧を確認する
4. 詳細を選択して内容を確認する

**事後条件**:
- 過去のフィードバック内容が閲覧できる

---

## システム3: 求人データ整備

### UC-J01: 求人データの収集

**アクター**: システム（自動実行）

**目的**: Web上の電気工事士求人を網羅的に収集する

**事前条件**:
- スクレイピング対象サイトが設定されている
- 検索条件（電気工事士資格）が定義されている

**基本フロー**:
1. スケジューラがジョブを起動する
2. 各対象サイトに順次アクセスする
3. 電気工事士求人を検索・抽出する
4. データを正規化してDBに保存する（会社名、エリア、求人内容）
5. 重複チェックを実行する

**事後条件**:
- 最新の求人データが収集・保存される

---

### UC-J02: 新規法人の発見

**アクター**: 営業企画 / システム（自動実行）

**目的**: まだ保有していない法人の電気工事士求人を発見する

**事前条件**:
- 既存保有法人リストがインポートされている
- 収集した求人データが存在する

**基本フロー**:
1. システムが収集データの法人名を抽出する
2. 既存保有法人リストと照合する
3. リストにない法人（＝新規法人）を抽出する
4. 新規法人リストを生成する

**事後条件**:
- 新規開拓候補となる法人リストが得られる

---

### UC-J03: 既存法人の新規エリア求人検出

**アクター**: 営業企画 / システム（自動実行）

**目的**: すでに保有している法人が、自社で把握していないエリアで出している求人を検出する

**事前条件**:
- 既存保有法人リスト（法人名＋保有エリア）がインポートされている
- 収集した求人データが存在する

**基本フロー**:
1. システムが既存法人の収集求人を抽出する
2. 各法人について、収集エリアと自社保有エリアを比較する
3. 自社で保有していないエリアの求人を特定する
4. 既存法人・新規エリアリストを生成する

**事後条件**:
- 既存法人への追加アプローチ候補リストが得られる

---

### UC-J04: 自社保有求人との比較・不足求人特定

**アクター**: 営業企画

**目的**: 収集した求人と自社保有求人を比較し、不足している求人を特定する

**事前条件**:
- 自社保有求人データがインポートされている
- 収集した求人データが存在する

**基本フロー**:
1. ユーザーが比較を実行する
2. システムが法人×エリアで収集データと自社データをマッチングする
3. 自社で保有していない求人を抽出する
4. 不足求人レポートを生成する

**事後条件**:
- 求人獲得活動の候補リストが得られる

---

### UC-J05: 都道府県別カバー率レポート

**アクター**: 営業企画

**目的**: 都道府県別に求人のカバー率を把握し、戦略立案に活用する

**事前条件**:
- 自社保有データの都道府県別集計が可能
- 収集データの都道府県別集計が可能

**基本フロー**:
1. ユーザーがレポート生成を実行する
2. システムが都道府県別に自社/収集データを集計する
3. カバー率（自社保有数 / 市場全体数）を算出する
4. レポートをCSV/Excelで出力する

**事後条件**:
- 都道府県別のカバー率レポートが得られる

---

### UC-J06: 定期チェックと通知

**アクター**: システム（自動実行）

**目的**: 定期的に求人データを収集・比較し、新規発見を通知する

**事前条件**:
- 定期実行スケジュールが設定されている
- 通知先が設定されている

**基本フロー**:
1. スケジューラがジョブを起動する
2. 求人データを収集する（UC-J01）
3. 新規法人を検出する（UC-J02）
4. 既存法人の新規エリア求人を検出する（UC-J03）
5. 前回実行からの差分をサマリーレポートにまとめる
6. 新規発見があればSlack/メールで関係者に通知する

**事後条件**:
- 定期レポートが関係者に届く
- 新規発見があれば即時通知される

---

## ユースケース図

```
┌─────────────────────────────────────────────────────────────────┐
│                    人材紹介事業AIエージェント                      │
├─────────────────────────────────────────────────────────────────┤
│                                                                 │
│  [経営層]──────┬── UC-A01: セグメント別期待展開率確認            │
│                │                                                │
│  [マネージャー]─┼── UC-A02: 適正保有件数算出                     │
│                ├── UC-A03: リード振り分け最適化                  │
│                ├── UC-A04: パフォーマンス乖離アラート             │
│                └── UC-F04: フィードバック履歴確認                │
│                                                                 │
│  [CA]─────────── UC-F04: フィードバック履歴確認                  │
│                                                                 │
│  [営業企画]────┬── UC-J02: 新規法人発見                          │
│                ├── UC-J03: 既存法人・新規エリア検出               │
│                ├── UC-J04: 自社保有求人との比較                   │
│                └── UC-J05: 都道府県別カバー率レポート             │
│                                                                 │
│  [オペレーター]── UC-F01: 書き起こしファイル配置                 │
│                                                                 │
│  [システム]────┬── UC-F02: 通話分析・FB生成                      │
│                ├── UC-F03: Slack FB送信                         │
│                ├── UC-J01: 求人データ収集                        │
│                └── UC-J06: 定期チェック・通知                     │
│                                                                 │
└─────────────────────────────────────────────────────────────────┘
```

---

*最終更新: 2025-11-29*
