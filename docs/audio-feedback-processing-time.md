# 音声フィードバックシステム - 処理時間の目安

## 処理フローと各ステップの所要時間

現在のシステムでは、以下のフローで処理が行われます：

```
音声ファイルアップロード (即座)
    ↓
書き起こしの実施 (手動・外部サービス)
    ↓
書き起こしファイルの紐付け (数秒)
    ↓
フィードバック生成 (1-3分)
    ↓
Slack通知 (数秒)
```

## 各ステップの詳細

### 1. 音声ファイルのアップロード

**所要時間: 数秒〜1分程度**
- ファイルサイズに依存
- 通常の通話録音（27MB程度）: 10-30秒程度

### 2. 書き起こしの実施（手動）

**所要時間: 音声の長さ × 0.5〜2倍**

現在、書き起こしは手動で行います：

#### Zoomの場合
- **処理時間**: 通常、音声の長さの約 **0.5〜1倍**
- **例**: 
  - 30分の通話 → 約15-30分で書き起こし完了
  - 1時間の通話 → 約30-60分で書き起こし完了
- **注意**: Zoomの書き起こしは自動処理されますが、完了を待つ必要があります

#### Nottaの場合
- **処理時間**: 通常、音声の長さの約 **0.3〜0.8倍**
- **例**: 
  - 30分の通話 → 約10-25分で書き起こし完了
  - 1時間の通話 → 約20-50分で書き起こし完了
- **注意**: Nottaは比較的高速ですが、精度によって処理時間が変動します

**書き起こしの実際の時間:**
- 30分の通話: **約15-30分**
- 1時間の通話: **約30-60分**

### 3. 書き起こしファイルの紐付け

**所要時間: 数秒**
- `link_transcript.py` の実行: 2-5秒程度

### 4. フィードバック生成

**所要時間: 1-3分程度**

#### AI使用時 (`--use-ai` オプション)
- **Claude APIでの分析時間**: 約1-3分
  - 書き起こしの長さに依存
  - 30分の通話: 約1-2分
  - 1時間の通話: 約2-3分

#### ルールベース（AI不使用）
- **処理時間**: 数秒
- ただし、精度はAI使用時より低い

### 5. Slack通知

**所要時間: 数秒**
- Slack APIへの送信: 2-5秒程度

## 全体の処理時間の目安

### パターン1: 30分の通話の場合

| ステップ | 所要時間 |
|---------|---------|
| 音声ファイルアップロード | 10-30秒 |
| 書き起こし（Zoom/Notta） | 15-30分 |
| 書き起こしファイル紐付け | 5秒 |
| フィードバック生成（AI使用） | 1-2分 |
| Slack通知 | 5秒 |
| **合計** | **約17-33分** |

**最も時間がかかるのは書き起こしステップです。**

### パターン2: 1時間の通話の場合

| ステップ | 所要時間 |
|---------|---------|
| 音声ファイルアップロード | 20-60秒 |
| 書き起こし（Zoom/Notta） | 30-60分 |
| 書き起こしファイル紐付け | 5秒 |
| フィードバック生成（AI使用） | 2-3分 |
| Slack通知 | 5秒 |
| **合計** | **約32-64分** |

## Slackへの投稿想定時間

書き起こしが完了してから、Slackに投稿されるまでの時間：

### 最短ケース（書き起こし完了後）
1. 書き起こしファイル紐付け: **5秒**
2. フィードバック生成（AI使用）: **1-3分**
3. Slack通知: **5秒**
4. **合計: 約1-3分**

### 最長ケース（書き起こし完了後）
1. 書き起こしファイル紐付け: **5秒**
2. フィードバック生成（AI使用）: **3分**
3. Slack通知: **5秒**
4. **合計: 約3-4分**

**結論: 書き起こしが完了してから、Slack投稿まで約1-4分程度**

## 実際の運用フロー例

### ケース1: 午前中の通話を午後にフィードバック

```
10:00 - 通話開始（30分）
10:30 - 通話終了
10:30 - 音声ファイルをアップロード（30秒）
10:30 - Zoomで書き起こし開始
11:00 - 書き起こし完了（30分後）
11:00 - 書き起こしファイルを紐付け（5秒）
11:00 - フィードバック生成開始
11:02 - フィードバック生成完了（2分後）
11:02 - Slackに投稿完了 ⏰
```

**Slack投稿時刻: 通話終了から約32分後**

### ケース2: 午後の通話を即座にフィードバック（書き起こしが早い場合）

```
14:00 - 通話開始（30分）
14:30 - 通話終了
14:30 - 音声ファイルをアップロード（30秒）
14:30 - Nottaで書き起こし開始
14:45 - 書き起こし完了（15分後）
14:45 - 書き起こしファイルを紐付け（5秒）
14:45 - フィードバック生成開始
14:47 - フィードバック生成完了（2分後）
14:47 - Slackに投稿完了 ⏰
```

**Slack投稿時刻: 通話終了から約17分後**

## 時間短縮のコツ

### 1. 書き起こし時間を短縮する

- **Nottaを使用**: Zoomより高速な場合が多い
- **短い通話**: 30分以下の通話の方が書き起こしが速い
- **書き起こし中に他の作業**: 書き起こしは自動処理なので、待ち時間は他の作業に充てられる

### 2. フィードバック生成を速くする

- **ルールベースを使用**: AIを使用しない場合は数秒で完了（ただし精度は低い）
- **複数ファイルをまとめて処理**: 一度に複数のフィードバックを生成できる

## 今後の改善予定

将来的には以下の改善により、処理時間を大幅に短縮できる予定です：

1. **自動書き起こし機能の実装**
   - 音声ファイルアップロード後、自動的に書き起こしを開始
   - 書き起こし完了後、自動的にフィードバック生成
   - **目標**: 音声アップロードからフィードバック生成まで、平均30分以内（要件定義より）

2. **リアルタイム処理**
   - 書き起こし完了を検知して自動処理
   - Slack通知も自動化

## まとめ

### 現在のシステム

| 項目 | 時間 |
|------|------|
| 書き起こし（手動） | 音声時間の0.5-1倍 |
| フィードバック生成 | 1-3分 |
| Slack投稿（書き起こし完了後） | **約1-4分** |

### 書き起こし完了からSlack投稿まで

**約1-4分程度**

最も時間がかかるのは書き起こしステップ（手動）です。
書き起こしが完了すれば、フィードバック生成とSlack投稿は比較的速やかに完了します。

